# GitHub Actions 工作流说明

本目录包含了 GitHub Actions 自动化工作流配置。

## 工作流文件

### scrape-and-notify.yml

主工作流文件，用于定时抓取抖音热榜并推送到飞书群。

## 自定义执行频率

在 `scrape-and-notify.yml` 文件中，找到 `schedule` 部分，修改 cron 表达式即可。

### Cron 表达式格式

```
┌───────────── 分钟 (0 - 59)
│ ┌───────────── 小时 (0 - 23)
│ │ ┌───────────── 日期 (1 - 31)
│ │ │ ┌───────────── 月份 (1 - 12)
│ │ │ │ ┌───────────── 星期 (0 - 6) (周日到周六)
│ │ │ │ │
* * * * *
```

### 常用频率示例

```yaml
schedule:
  # 每小时执行一次
  - cron: '0 * * * *'

  # 每2小时执行一次
  - cron: '0 */2 * * *'

  # 每3小时执行一次
  - cron: '0 */3 * * *'

  # 每6小时执行一次
  - cron: '0 */6 * * *'

  # 每12小时执行一次（每天0点和12点）
  - cron: '0 0,12 * * *'

  # 每天早上9点执行
  - cron: '0 9 * * *'

  # 每天早上9点和晚上9点执行
  - cron: '0 9,21 * * *'

  # 每天早上9点、中午12点、下午6点执行
  - cron: '0 9,12,18 * * *'

  # 工作日（周一到周五）每天早上9点执行
  - cron: '0 9 * * 1-5'

  # 工作日（周一到周五）每天早上9点和下午6点执行
  - cron: '0 9,18 * * 1-5'

  # 每周一早上9点执行
  - cron: '0 9 * * 1'

  # 每月1号早上9点执行
  - cron: '0 9 1 * *'
```

### 多个定时任务

你可以同时配置多个时间点执行：

```yaml
schedule:
  # 每天早上9点
  - cron: '0 9 * * *'
  # 每天中午12点
  - cron: '0 12 * * *'
  # 每天下午6点
  - cron: '0 18 * * *'
```

## 注意事项

1. **时区问题**: GitHub Actions 使用 UTC 时间，需要转换为你的本地时区
   - 例如：北京时间（UTC+8）早上9点 = UTC时间凌晨1点
   - 北京时间 9:00 → UTC 1:00 → cron: '0 1 * * *'

2. **执行延迟**: GitHub Actions 可能会有几分钟的延迟，不保证精确按时执行

3. **最短间隔**: 建议不要设置低于每小时一次的频率，避免过于频繁的请求

4. **手动触发**: 可以在 GitHub Actions 页面手动触发工作流，无需等待定时任务

## 时区转换表（以北京时间为例）

| 北京时间 (UTC+8) | UTC 时间 | Cron 表达式 |
|-----------------|---------|------------|
| 00:00 | 16:00 (前一天) | '0 16 * * *' |
| 06:00 | 22:00 (前一天) | '0 22 * * *' |
| 09:00 | 01:00 | '0 1 * * *' |
| 12:00 | 04:00 | '0 4 * * *' |
| 15:00 | 07:00 | '0 7 * * *' |
| 18:00 | 10:00 | '0 10 * * *' |
| 21:00 | 13:00 | '0 13 * * *' |

## 在线 Cron 表达式生成器

如果不熟悉 cron 表达式，可以使用在线工具：
- https://crontab.guru/
- https://crontab-generator.org/
